(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(t,n,e){},24:function(t,n,e){},44:function(t,n,e){"use strict";e.r(n);var o=e(2),c=e(17),r=e.n(c),a=(e(22),e(3)),i=e.n(a),u=e(7),s=e(6),l=e(5),f=(e(24),e(0)),p=function(t){var n=t.note,e=t.toggleImportance,o=(t.updateDate,t.removeNote),c=n.important?"make not important":"make important";return Object(f.jsxs)("li",{className:n.important?"noteLiBold":"noteLi",children:[Object(f.jsx)("span",{children:n.date.split("T")[0]}),Object(f.jsx)("span",{children:n.content}),Object(f.jsx)("button",{onClick:e,children:c}),Object(f.jsx)("button",{onClick:o,children:"Remove note"})]})};function d(){return Object(f.jsx)("footer",{style:{color:"grey",fontStyle:"italic",fontSize:16,position:"fixed",bottom:"16px"},children:Object(f.jsx)("em",{children:"Note app, Department of Computer Science, University of Helsini 2021"})})}var j=e(4),h=e.n(j),b="api/notes",m=function(){return h.a.get(b).then((function(t){return t.data}))},O=function(t){return h.a.post(b,t).then((function(t){return t.data}))},x=function(t,n){return h.a.put("".concat(b,"/").concat(t,"/importance"),n).then((function(t){return t.data}))},v=function(t,n){return h.a.put("".concat(b,"/").concat(t,"/date"),n).then((function(t){return t.data}))},g=function(t,n){return h.a.delete("".concat(b,"/").concat(t),n),h.a.get(b)};var y=function(){var t=Object(o.useState)([]),n=Object(l.a)(t,2),e=n[0],c=n[1],r=Object(o.useState)(""),a=Object(l.a)(r,2),j=a[0],h=a[1],b=Object(o.useState)(!0),y=Object(l.a)(b,2),w=y[0],k=y[1],S=Object(o.useState)(null),N=Object(l.a)(S,2),D=N[0],C=N[1];function I(){return F.apply(this,arguments)}function F(){return(F=Object(s.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m().then((function(t){c(t)})).catch((function(t){console.log("Failed to Load Notes",t)}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function L(){return(L=Object(s.a)(i.a.mark((function t(n){var o,r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=e.find((function(t){return t.id===n})),r=(new Date).toISOString(),(a=Object(u.a)({},o)).date=r,v(n,a).then((function(t){c(e.map((function(e){return e.id!==n?e:t})))})).catch((function(t){C("Note ".concat(o.content,"'s was already removed"),t)})).finally(setTimeout((function(){C(null)}),5e3));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(){return(T=Object(s.a)(i.a.mark((function t(n){var o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.find((function(t){return t.id===n})),t.next=3,g(n,o).then(I()).catch((function(t){console.log("Failed to Delete note",t)}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(o.useEffect)((function(){I()}),[]);var A=w?e:e.filter((function(t){return t.important}));return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)("h1",{children:"Notes"}),D?Object(f.jsx)("h2",{children:D.message}):"",Object(f.jsx)("div",{children:Object(f.jsxs)("button",{onClick:function(){k(!w)},children:["show ",w?"important":"all"]})}),Object(f.jsx)("ul",{children:A.map((function(t){return Object(f.jsx)(p,{note:t,toggleImportance:function(){return function(t){var n=e.find((function(n){return n.id===t})),o=Object(u.a)(Object(u.a)({},n),{},{important:!n.important});console.log("changing importance of note",t),c(e.map((function(n){return n.id!==t?n:o}))),x(t,o).then((function(n){c(e.map((function(e){return e.id!==t?e:n})))})).catch((function(t){console.log("Failed to Update Importance",t)})).finally(setTimeout((function(){C(null)}),5e3))}(t.id)},updateDate:function(){return function(t){return L.apply(this,arguments)}(t.id)},removeNote:function(){return function(t){return T.apply(this,arguments)}(t.id)}},t.id)}))}),Object(f.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={content:j,date:(new Date).toISOString(),important:Math.random()<.4};O(n).then((function(t){c(e.concat(t)),h(""),C(null)})).catch((function(t){console.log("Failed to Create New Note",t),C(t)}))},children:[Object(f.jsx)("input",{value:j,onChange:function(t){h(t.target.value)},placeholder:"A new note..."}),Object(f.jsx)("button",{type:"submit",children:"save note"})]}),Object(f.jsx)(d,{})]})};r.a.render(Object(f.jsx)(y,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.30cd2521.chunk.js.map